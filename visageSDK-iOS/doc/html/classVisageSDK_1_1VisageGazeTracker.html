<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>visageSDK: VisageSDK::VisageGazeTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">visageSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>VisageSDK</b></li><li class="navelem"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html">VisageGazeTracker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classVisageSDK_1_1VisageGazeTracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">VisageSDK::VisageGazeTracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html" title="VisageGazeTracker extends VisageTracker functionality, adding screen space gaze tracking on top of fa...">VisageGazeTracker</a> extends <a class="el" href="classVisageSDK_1_1VisageTracker.html" title="VisageTracker is a face tracker capable of tracking the head pose, facial features and gaze for multi...">VisageTracker</a> functionality, adding screen space gaze tracking on top of face tracking.  
 <a href="classVisageSDK_1_1VisageGazeTracker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="VisageGazeTracker_8h_source.html">VisageGazeTracker.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for VisageSDK::VisageGazeTracker:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classVisageSDK_1_1VisageGazeTracker.png" usemap="#VisageSDK::VisageGazeTracker_map" alt=""/>
  <map id="VisageSDK::VisageGazeTracker_map" name="VisageSDK::VisageGazeTracker_map">
<area href="classVisageSDK_1_1VisageTracker.html" title="VisageTracker is a face tracker capable of tracking the head pose, facial features and gaze for multi..." alt="VisageSDK::VisageTracker" shape="rect" coords="0,0,194,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a65acc04648e929a84f108515f8f64592"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a65acc04648e929a84f108515f8f64592">VisageGazeTracker</a> (const char *trackerConfigFile)</td></tr>
<tr class="memdesc:a65acc04648e929a84f108515f8f64592"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a65acc04648e929a84f108515f8f64592">More...</a><br /></td></tr>
<tr class="separator:a65acc04648e929a84f108515f8f64592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0bb6cecdb6f25f8eaf36b2a3457155"><td class="memItemLeft" align="right" valign="top"><a id="a3f0bb6cecdb6f25f8eaf36b2a3457155"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a3f0bb6cecdb6f25f8eaf36b2a3457155">~VisageGazeTracker</a> ()</td></tr>
<tr class="memdesc:a3f0bb6cecdb6f25f8eaf36b2a3457155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a3f0bb6cecdb6f25f8eaf36b2a3457155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a392bb203cb31f6cf130b8e1926d34e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2a392bb203cb31f6cf130b8e1926d34e">InitOnlineGazeCalibration</a> ()</td></tr>
<tr class="memdesc:a2a392bb203cb31f6cf130b8e1926d34e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes online screen space gaze tracking.  <a href="#a2a392bb203cb31f6cf130b8e1926d34e">More...</a><br /></td></tr>
<tr class="separator:a2a392bb203cb31f6cf130b8e1926d34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4182976e7108f27277449e9ad02166e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e">AddGazeCalibrationPoint</a> (float x, float y)</td></tr>
<tr class="memdesc:ae4182976e7108f27277449e9ad02166e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passes a calibration point to the tracker in online screen space gaze tracking mode.  <a href="#ae4182976e7108f27277449e9ad02166e">More...</a><br /></td></tr>
<tr class="separator:ae4182976e7108f27277449e9ad02166e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2106b8a796afb6e94d55150b34b08ebb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb">FinalizeOnlineGazeCalibration</a> ()</td></tr>
<tr class="memdesc:a2106b8a796afb6e94d55150b34b08ebb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalizes online screen space gaze tracking calibration.  <a href="#a2106b8a796afb6e94d55150b34b08ebb">More...</a><br /></td></tr>
<tr class="separator:a2106b8a796afb6e94d55150b34b08ebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e30d5f08a1248af1b65e03982d754de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a6e30d5f08a1248af1b65e03982d754de">InitOfflineGazeCalibration</a> (<a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html">ScreenSpaceGazeRepository</a> *calibrator)</td></tr>
<tr class="memdesc:a6e30d5f08a1248af1b65e03982d754de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes offline screen space gaze tracking.  <a href="#a6e30d5f08a1248af1b65e03982d754de">More...</a><br /></td></tr>
<tr class="separator:a6e30d5f08a1248af1b65e03982d754de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acae907e7aeefe7c32c3e14cfe1972131"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#acae907e7aeefe7c32c3e14cfe1972131">GetGazeEstimations</a> (<a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html">ScreenSpaceGazeRepository</a> *repository)</td></tr>
<tr class="memdesc:acae907e7aeefe7c32c3e14cfe1972131"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns screen space gaze estimation data obtained in offline gaze tracking mode.  <a href="#acae907e7aeefe7c32c3e14cfe1972131">More...</a><br /></td></tr>
<tr class="separator:acae907e7aeefe7c32c3e14cfe1972131"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classVisageSDK_1_1VisageTracker"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classVisageSDK_1_1VisageTracker')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classVisageSDK_1_1VisageTracker.html">VisageSDK::VisageTracker</a></td></tr>
<tr class="memitem:a31f7894030a00f8f9ef937e4ec3dffbb inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a31f7894030a00f8f9ef937e4ec3dffbb">VisageTracker</a> (const char *trackerConfigFile)</td></tr>
<tr class="memdesc:a31f7894030a00f8f9ef937e4ec3dffbb inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classVisageSDK_1_1VisageTracker.html#a31f7894030a00f8f9ef937e4ec3dffbb">More...</a><br /></td></tr>
<tr class="separator:a31f7894030a00f8f9ef937e4ec3dffbb inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6f4e3a76ff950305d1b590a1defc97 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top"><a id="a7f6f4e3a76ff950305d1b590a1defc97"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a7f6f4e3a76ff950305d1b590a1defc97">~VisageTracker</a> ()</td></tr>
<tr class="memdesc:a7f6f4e3a76ff950305d1b590a1defc97 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a7f6f4e3a76ff950305d1b590a1defc97 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58ecb19c8e4adb16ee19be4e0187610 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">virtual int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#ad58ecb19c8e4adb16ee19be4e0187610">track</a> (int frameWidth, int frameHeight, const char *p_imageData, <a class="el" href="structVisageSDK_1_1FaceData.html">FaceData</a> *facedata, int format=VISAGE_FRAMEGRABBER_FMT_RGB, int origin=VISAGE_FRAMEGRABBER_ORIGIN_TL, int widthStep=0, long timeStamp=-1, int maxFaces=1)</td></tr>
<tr class="memdesc:ad58ecb19c8e4adb16ee19be4e0187610 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs face tracking (one or more faces) in the given image and returns tracking results and status.  <a href="classVisageSDK_1_1VisageTracker.html#ad58ecb19c8e4adb16ee19be4e0187610">More...</a><br /></td></tr>
<tr class="separator:ad58ecb19c8e4adb16ee19be4e0187610 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f496426241db2487f4c4679f12e2a6a inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a0f496426241db2487f4c4679f12e2a6a">setTrackerConfiguration</a> (const char *trackerConfigFile, bool au_fitting_disabled=false, bool mesh_fitting_disabled=false)</td></tr>
<tr class="memdesc:a0f496426241db2487f4c4679f12e2a6a inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set tracking configuration.  <a href="classVisageSDK_1_1VisageTracker.html#a0f496426241db2487f4c4679f12e2a6a">More...</a><br /></td></tr>
<tr class="separator:a0f496426241db2487f4c4679f12e2a6a inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6faea2ca70b77d653996c7dee849a460 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a6faea2ca70b77d653996c7dee849a460">setIPD</a> (float value)</td></tr>
<tr class="memdesc:a6faea2ca70b77d653996c7dee849a460 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the inter pupillary distance.  <a href="classVisageSDK_1_1VisageTracker.html#a6faea2ca70b77d653996c7dee849a460">More...</a><br /></td></tr>
<tr class="separator:a6faea2ca70b77d653996c7dee849a460 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764786519941336bef07c44f0c92c075 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a764786519941336bef07c44f0c92c075">getIPD</a> ()</td></tr>
<tr class="memdesc:a764786519941336bef07c44f0c92c075 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current inter pupillary distance (IPD) setting.  <a href="classVisageSDK_1_1VisageTracker.html#a764786519941336bef07c44f0c92c075">More...</a><br /></td></tr>
<tr class="separator:a764786519941336bef07c44f0c92c075 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1642123d5415153eca075e1de27fffcd inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a1642123d5415153eca075e1de27fffcd">stop</a> ()</td></tr>
<tr class="memdesc:a1642123d5415153eca075e1de27fffcd inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop tracking.  <a href="classVisageSDK_1_1VisageTracker.html#a1642123d5415153eca075e1de27fffcd">More...</a><br /></td></tr>
<tr class="separator:a1642123d5415153eca075e1de27fffcd inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e149b87d27824f2fdc1dcf083fa27e1 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#a4e149b87d27824f2fdc1dcf083fa27e1">reset</a> ()</td></tr>
<tr class="memdesc:a4e149b87d27824f2fdc1dcf083fa27e1 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset tracking.  <a href="classVisageSDK_1_1VisageTracker.html#a4e149b87d27824f2fdc1dcf083fa27e1">More...</a><br /></td></tr>
<tr class="separator:a4e149b87d27824f2fdc1dcf083fa27e1 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc11f105be17329c0ef5b51dbc719f53 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memItemLeft" align="right" valign="top"><a id="abc11f105be17329c0ef5b51dbc719f53"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageSDK_1_1VisageTracker.html#abc11f105be17329c0ef5b51dbc719f53">getSDKVersion</a> ()</td></tr>
<tr class="memdesc:abc11f105be17329c0ef5b51dbc719f53 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns visageSDK version and revision number. <br /></td></tr>
<tr class="separator:abc11f105be17329c0ef5b51dbc719f53 inherit pub_methods_classVisageSDK_1_1VisageTracker"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html" title="VisageGazeTracker extends VisageTracker functionality, adding screen space gaze tracking on top of fa...">VisageGazeTracker</a> extends <a class="el" href="classVisageSDK_1_1VisageTracker.html" title="VisageTracker is a face tracker capable of tracking the head pose, facial features and gaze for multi...">VisageTracker</a> functionality, adding screen space gaze tracking on top of face tracking. </p>
<p>For information about using the facial/head tracking refer to <a class="el" href="classVisageSDK_1_1VisageTracker.html" title="VisageTracker is a face tracker capable of tracking the head pose, facial features and gaze for multi...">VisageTracker</a>.</p>
<p>Screen space gaze tracking estimates gaze position (the location on the screen where the user is looking) in normalized screen coordinates. Screen space gaze tracking works in two phases: calibration and estimation.</p>
<p>In the calibration phase, the system is calibrated for gaze estimation by passing the calibration data to the tracker. Calibration data consists of series of points displayed on screen. The user looks at each calibration point. During the calibration phase tracker collects calibration points and matching tracking data for each point. After all calibration points have been passed to the tracker, the tracker performs calibration of the gaze tracking system and switches to estimation phase.</p>
<p>In the estimation phase the tracker estimates gaze location in screen space coordinates and returns the data as <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a> object for each frame.</p>
<p>Screen space gaze tracking works in two different modes. Online mode is used when tracking in real time from camera. Offline mode is used when tracking from video files. The key differences between the two modes are: </p><table class="doxtable">
<tr>
<td width="600"><b>ONLINE</b></td><td width="600"><b>OFFLINE</b> </td></tr>
<tr>
<td>Each <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object while tracking contains screen space gaze data for the current frame. </td><td>Gaze estimation is done as a post process after the tracking is finished for the whole video sequence and returned as <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object. <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> objects returned by the tracker during tracking contain no screen space gaze data for current frame. </td></tr>
<tr>
<td>Calibration data is passed to the tracker simultaneously as it is shown on screen. </td><td>Calibration data is passed as a <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object for the whole video sequence. </td></tr>
<tr>
<td>Online mode can be initialized at any time during tracking. </td><td>Offline mode has to be initialized before tracking is started.  </td></tr>
<tr>
<td>The application is responsible for finalizing gaze tracking system calibration. </td><td>Calibration is finalized automatically. </td></tr>
</table>
<h3>Online screen space gaze tracking</h3>
<p>Online mode implies using the screen space gaze tracking when tracking from camera.</p>
<p>It is initialized by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2a392bb203cb31f6cf130b8e1926d34e" title="Initializes online screen space gaze tracking. ">InitOnlineGazeCalibration()</a> method. This method prepares the tracker for real time gaze tracking calibration. Each calibration point in normalized screen coordinates is passed to the tracker by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e" title="Passes a calibration point to the tracker in online screen space gaze tracking mode. ">AddGazeCalibrationPoint()</a>. It is expected that the point is displayed on the screen before calling the method and that the user looks at calibration points during the calibration. Application is responsible for reading or generating the calibration data, displaying it on screen and synchronization with the tracker. It is required to manually notify the tracker that calibration is finished (once all calibration points are used) by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb" title="Finalizes online screen space gaze tracking calibration. ">FinalizeOnlineGazeCalibration()</a> method. Once this method is called the tracker performs calibration of screen space gaze tracking system using provided calibration data and tracking data collected during the calibration process.</p>
<p>After the system is calibrated the estimation phase starts. Estimations are returned as part of <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> objects obtained by calling track() method, specifically in <a class="el" href="structVisageSDK_1_1FaceData.html#afa666a789971fb67bd4e485c505ba61b" title="Structure holding screen space gaze position and quality for current frame. ">FaceData::gazeData</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2a392bb203cb31f6cf130b8e1926d34e" title="Initializes online screen space gaze tracking. ">InitOnlineGazeCalibration()</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e" title="Passes a calibration point to the tracker in online screen space gaze tracking mode. ">AddGazeCalibrationPoint()</a> <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb" title="Finalizes online screen space gaze tracking calibration. ">FinalizeOnlineGazeCalibration()</a>, <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a>, <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a>, <a class="el" href="classVisageSDK_1_1VisageTracker.html" title="VisageTracker is a face tracker capable of tracking the head pose, facial features and gaze for multi...">VisageTracker</a></dd></dl>
<h3>Offline screen space gaze tracking</h3>
<p>Offline mode implies using gaze tracking feature when tracking from video file. It is assumed that calibration points have been displayed to the user while recording the video of the user's face; that user actually looked at the calibration points; and that these calibration points have been stored, together with corresponding time stamps. Furthermore, it is assumed that calibration was performed during a part of the video sequence. Gaze estimation is performed on all frames of the video sequence. The calibration parts of the video need not be contiguous.</p>
<p>Offline mode initialized by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a6e30d5f08a1248af1b65e03982d754de" title="Initializes offline screen space gaze tracking. ">InitOfflineGazeCalibration()</a> method. This method takes <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object as parameter. This object contains calibration data for the tracked video sequence. Each calibration point consists of x and y coordinates given in normalized screen coordinates and the index of the frame in which calibration point was displayed to the user. The tracker reads calibration points from the provided repository and collects tracking data from corresponding frames of the tracked video sequence. Once all calibration data from provided repository is used, the tracker performs calibration of the gaze tracking system using provided calibration data and tracking data collected during the calibration process.</p>
<p>Offline mode must be initialized before tracking is started, otherwise some of the calibration frames may be discarded.</p>
<p>After the whole video file has been processed, tracking stops and gaze estimations are available as <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object, obtained by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#acae907e7aeefe7c32c3e14cfe1972131" title="Returns screen space gaze estimation data obtained in offline gaze tracking mode. ...">GetGazeEstimations()</a> method. The returned repository contains <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a> object with screen space gaze position for each non-calibration frame of the tracked video sequence.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a6e30d5f08a1248af1b65e03982d754de" title="Initializes offline screen space gaze tracking. ">InitOfflineGazeCalibration()</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#acae907e7aeefe7c32c3e14cfe1972131" title="Returns screen space gaze estimation data obtained in offline gaze tracking mode. ...">GetGazeEstimations()</a>, <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a>, <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a></dd></dl>
<h3>Gaze tracking quality </h3>
<p>Gaze tracking quality is available in online and offline mode on both frame and session level. Quality is returned as a value from 0 to 1 where 0 is the worst while 1 is the best.</p>
<p>In online mode quality is returned as a part of <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object. The frame level quality in online mode is returned as a quality parameter in <a class="el" href="structVisageSDK_1_1FaceData.html#afa666a789971fb67bd4e485c505ba61b" title="Structure holding screen space gaze position and quality for current frame. ">FaceData::gazeData</a> object. The session level quality in online mode is returned as a gazeQuality parameter in <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object. In online mode all frames passed to the tracker are considered part of a session, meaning that the quality is recalculated for each new frame processed by the tracker.</p>
<p>In offline mode quality is obtained using getGazeEstimations method. The frame level quality in offline mode is returned as a quality parameter in each <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a> object in <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a>. The session level quality in offline mode is returned by GetGazeEstimations function. </p>

<p class="definition">Definition at line <a class="el" href="VisageGazeTracker_8h_source.html#l00094">94</a> of file <a class="el" href="VisageGazeTracker_8h_source.html">VisageGazeTracker.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a65acc04648e929a84f108515f8f64592"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65acc04648e929a84f108515f8f64592">&#9670;&nbsp;</a></span>VisageGazeTracker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VisageSDK::VisageGazeTracker::VisageGazeTracker </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>trackerConfigFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trackerConfigFile</td><td>the name of the tracker configuration file (.cfg; default configuration files are provided in Samples/data folder. Constructor must be called with the full path to the configuration file. The configuration file is in the same directory as other data files needed by the tracker. Because it is in the same directory its path can be parsed to set the path for the other data files. For further details see <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a>and section on <a href="../../doc/creatingxc.html#config_selection">device-specific configuration selection</a>.). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae4182976e7108f27277449e9ad02166e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4182976e7108f27277449e9ad02166e">&#9670;&nbsp;</a></span>AddGazeCalibrationPoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageSDK::VisageGazeTracker::AddGazeCalibrationPoint </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Passes a calibration point to the tracker in online screen space gaze tracking mode. </p>
<p>This method is used in online gaze tracking mode to pass the position of the currently displayed calibration point to the tracker. This method should be called once for each calibration point, after the calibration point is displayed on the screen. Position of the calibration point is in normalized screen coordinates. The origin of the coordinate system is in the upper left corner of the screen; the lower right corner has coordinates (1, 1).</p>
<p>NOTE: Application is responsible for synchronization between the frequency of passing calibration points to the tracker and the frequency at which the tracker processes video frames. If calibration points are passed faster than the tracker works, it may happen that two (or more) calibration points are passed while the tracker is processing a single video frame. In such case, if the difference in speed is large enough, it is possible that the tracking data for the processed frame does not match to the calibration point. This reduces the quality of calibration and, consequently, estimation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>x coordinate of the calibration point in normalized screen coordinates </td></tr>
    <tr><td class="paramname">y</td><td>y coordinate of the calibration point in normalized screen coordinates </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2a392bb203cb31f6cf130b8e1926d34e" title="Initializes online screen space gaze tracking. ">InitOnlineGazeCalibration()</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb" title="Finalizes online screen space gaze tracking calibration. ">FinalizeOnlineGazeCalibration()</a> </dd></dl>

</div>
</div>
<a id="a2106b8a796afb6e94d55150b34b08ebb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2106b8a796afb6e94d55150b34b08ebb">&#9670;&nbsp;</a></span>FinalizeOnlineGazeCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageSDK::VisageGazeTracker::FinalizeOnlineGazeCalibration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalizes online screen space gaze tracking calibration. </p>
<p>This method should be called after all calibration data is displayed and passed to the tracker. After this method is called the tracker performs calibration of gaze tracking system using the provided calibration data and the tracking data collected during the calibration phase.</p>
<p>After the calibration is finished, screen space gaze position is obtained as a part of <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object passed to the track() function. The <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object contains gaze position stored in <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a> object, specifically in <a class="el" href="structVisageSDK_1_1FaceData.html#afa666a789971fb67bd4e485c505ba61b" title="Structure holding screen space gaze position and quality for current frame. ">FaceData::gazeData</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2a392bb203cb31f6cf130b8e1926d34e" title="Initializes online screen space gaze tracking. ">InitOnlineGazeCalibration()</a>, <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a>, <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e" title="Passes a calibration point to the tracker in online screen space gaze tracking mode. ">AddGazeCalibrationPoint()</a> </dd></dl>

</div>
</div>
<a id="acae907e7aeefe7c32c3e14cfe1972131"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acae907e7aeefe7c32c3e14cfe1972131">&#9670;&nbsp;</a></span>GetGazeEstimations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float VisageSDK::VisageGazeTracker::GetGazeEstimations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html">ScreenSpaceGazeRepository</a> *&#160;</td>
          <td class="paramname"><em>repository</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns screen space gaze estimation data obtained in offline gaze tracking mode. </p>
<p>This function is used for obtaining estimation data in offline mode (in online mode estimation data is a part of the <a class="el" href="structVisageSDK_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object passed to the track() function). It returns the repository containing screen space gaze data for each non - calibration frame of processed sequence.</p>
<p>The method returns an empty array if called during tracking.</p>
<p>Note that each time this method is called, the memory for returned <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object is deallocated and reallocated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">repository</td><td>to be filled with screen space gaze data for last tracked sequence </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>quality grade from 0 to 1 where 0 is the worst grade while 1 is the best. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a>, <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a6e30d5f08a1248af1b65e03982d754de" title="Initializes offline screen space gaze tracking. ">InitOfflineGazeCalibration()</a> </dd></dl>

</div>
</div>
<a id="a6e30d5f08a1248af1b65e03982d754de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e30d5f08a1248af1b65e03982d754de">&#9670;&nbsp;</a></span>InitOfflineGazeCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageSDK::VisageGazeTracker::InitOfflineGazeCalibration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html">ScreenSpaceGazeRepository</a> *&#160;</td>
          <td class="paramname"><em>calibrator</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes offline screen space gaze tracking. </p>
<p>Offline mode is used when tracking from video file. This method must be called before tracking is started using <a class="el" href="classVisageSDK_1_1VisageTracker.html#ad58ecb19c8e4adb16ee19be4e0187610" title="Performs face tracking (one or more faces) in the given image and returns tracking results and status...">VisageTracker::track()</a>. Calibration data is passed to the tracker as a <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> object containing a number of calibration points, each consisting of the position of the calibration point in normalized screen coordinates and the frame index in which the calibration point was displayed to the user. The data for each calibration point is stored as a <a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a> object.</p>
<p>During the calibration phase tracker reads calibration points from the provided <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> and collects tracking data in corresponding frames of the tracked video sequence. The gaze tracking system is calibrated automatically after all calibration points from the provided repository are used. After the tracking of the whole video sequence is finished, the screen space gaze positions can be obtained by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#acae907e7aeefe7c32c3e14cfe1972131" title="Returns screen space gaze estimation data obtained in offline gaze tracking mode. ...">GetGazeEstimations()</a> method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">calibrator</td><td>Pointer to <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a> containing calibration data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structVisageSDK_1_1ScreenSpaceGazeData.html" title="ScreenSpaceGazeData is a container structure used to hold the gaze point location, current state of screen space gaze tracking system and gaze tracking estimation quality parameters for the current frame. ">ScreenSpaceGazeData</a>, <a class="el" href="classVisageSDK_1_1ScreenSpaceGazeRepository.html" title="Data repository holding ScreenSpaceGazeData objects in offline screen space gaze tracking mode...">ScreenSpaceGazeRepository</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#acae907e7aeefe7c32c3e14cfe1972131" title="Returns screen space gaze estimation data obtained in offline gaze tracking mode. ...">GetGazeEstimations()</a> </dd></dl>

</div>
</div>
<a id="a2a392bb203cb31f6cf130b8e1926d34e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a392bb203cb31f6cf130b8e1926d34e">&#9670;&nbsp;</a></span>InitOnlineGazeCalibration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageSDK::VisageGazeTracker::InitOnlineGazeCalibration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes online screen space gaze tracking. </p>
<p>Online mode is used when tracking from camera. This method starts the calibration phase of screen space gaze tracking. In the calibration phase the application displays the calibration data on the screen and passes it to the tracker using <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e" title="Passes a calibration point to the tracker in online screen space gaze tracking mode. ">AddGazeCalibrationPoint()</a>. Application is responsible for finishing the calibration phase by calling <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb" title="Finalizes online screen space gaze tracking calibration. ">FinalizeOnlineGazeCalibration()</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#ae4182976e7108f27277449e9ad02166e" title="Passes a calibration point to the tracker in online screen space gaze tracking mode. ">AddGazeCalibrationPoint()</a>, <a class="el" href="classVisageSDK_1_1VisageGazeTracker.html#a2106b8a796afb6e94d55150b34b08ebb" title="Finalizes online screen space gaze tracking calibration. ">FinalizeOnlineGazeCalibration()</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="VisageGazeTracker_8h_source.html">VisageGazeTracker.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
