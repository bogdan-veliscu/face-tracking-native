<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>visageSDK: VisageCSWrapper.VisageTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">visageSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceVisageCSWrapper.html">VisageCSWrapper</a></li><li class="navelem"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html">VisageTracker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classVisageCSWrapper_1_1VisageTracker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">VisageCSWrapper.VisageTracker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for multiple faces in video coming from a video file, camera or other sources.  
 <a href="classVisageCSWrapper_1_1VisageTracker.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for VisageCSWrapper.VisageTracker:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classVisageCSWrapper_1_1VisageTracker.png" usemap="#VisageCSWrapper.VisageTracker_map" alt=""/>
  <map id="VisageCSWrapper.VisageTracker_map" name="VisageCSWrapper.VisageTracker_map">
<area href="classVisageCSWrapper_1_1VisageGazeTracker.html" title="VisageGazeTracker extends VisageTracker functionality, adding screen space gaze tracking on top of fa..." alt="VisageCSWrapper.VisageGazeTracker" shape="rect" coords="0,56,233,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab0224d438461028c901aba8fb9c66e35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#ab0224d438461028c901aba8fb9c66e35">VisageTracker</a> (String trackerConfigFile)</td></tr>
<tr class="memdesc:ab0224d438461028c901aba8fb9c66e35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ab0224d438461028c901aba8fb9c66e35">More...</a><br /></td></tr>
<tr class="separator:ab0224d438461028c901aba8fb9c66e35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459cd7e4a70665c99f97b6958e1351d9"><td class="memItemLeft" align="right" valign="top">int []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a459cd7e4a70665c99f97b6958e1351d9">Track</a> (int frameWidth, int frameHeight, Byte[] imageData, <a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>[] faceData, int format=VISAGE_FORMAT.RGB, int origin=VISAGE_ORIGIN.TL, int widthStep=0, long timeStamp=-1, int maxFaces=-1)</td></tr>
<tr class="memdesc:a459cd7e4a70665c99f97b6958e1351d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs face tracking (one or more faces) in the given image and returns tracking results and status.  <a href="#a459cd7e4a70665c99f97b6958e1351d9">More...</a><br /></td></tr>
<tr class="separator:a459cd7e4a70665c99f97b6958e1351d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140fce671473ca51747f3414e4bb384c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a140fce671473ca51747f3414e4bb384c">SetTrackerConfiguration</a> (String trackerConfigFile, bool au_fitting_disabled=false, bool mesh_fitting_disabled=false)</td></tr>
<tr class="memdesc:a140fce671473ca51747f3414e4bb384c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set configuration file name.  <a href="#a140fce671473ca51747f3414e4bb384c">More...</a><br /></td></tr>
<tr class="separator:a140fce671473ca51747f3414e4bb384c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac0ba343466c6012c66585717c38ef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a6ac0ba343466c6012c66585717c38ef5">Stop</a> ()</td></tr>
<tr class="memdesc:a6ac0ba343466c6012c66585717c38ef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the tracking.  <a href="#a6ac0ba343466c6012c66585717c38ef5">More...</a><br /></td></tr>
<tr class="separator:a6ac0ba343466c6012c66585717c38ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af217f4271298546dde194ebac70251e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#af217f4271298546dde194ebac70251e3">Reset</a> ()</td></tr>
<tr class="memdesc:af217f4271298546dde194ebac70251e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset tracking.  <a href="#af217f4271298546dde194ebac70251e3">More...</a><br /></td></tr>
<tr class="separator:af217f4271298546dde194ebac70251e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for multiple faces in video coming from a video file, camera or other sources. </p>
<p>The tracker is fully configurable through comprehensive tracker configuration files. visage|SDK contains optimal configurations for common uses such as head tracking and facial features tracking. Please refer to the <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a> for the list of available configurations.</p>
<p>The <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a> provides full detail on all available configuration options, allowing to customize the tracker in terms of performance, quality, and other options.</p>
<p>The tracker offers the following outputs as a part of <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object:</p><ul>
<li>3D head pose,</li>
<li>facial expression,</li>
<li>gaze information,</li>
<li>eye closure,</li>
<li>facial feature points,</li>
<li>full 3D face model, textured.</li>
</ul>
<p>The tracker can apply a smoothing filter to tracking results to reduce the inevitable tracking noise. Smoothing factors are adjusted separately for different parts of the face. The smoothing settings in the supplied tracker configurations are adjusted conservatively to avoid delay in tracking response, yet provide reasonable smoothing. For further details please see the smoothing_factors parameter array in the <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a>.Frames (images) need to be passed sequentially to the VisageTracker::track() method, which immediately returns results for the given frame. The tracker requires a set of data and configuration files, available in Samples/data.</p>
<p>Please either copy the complete contents of this folder into your application's working folder, or consult <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a> for detailed settings.</p>

<p class="definition">Definition at line <a class="el" href="VisageTracker_8cs_source.html#l00087">87</a> of file <a class="el" href="VisageTracker_8cs_source.html">VisageTracker.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab0224d438461028c901aba8fb9c66e35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0224d438461028c901aba8fb9c66e35">&#9670;&nbsp;</a></span>VisageTracker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VisageCSWrapper.VisageTracker.VisageTracker </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>trackerConfigFile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trackerConfigFile</td><td>the name of the tracker configuration file (.cfg), relative to the current working directory, e.g. "visageSDK\Samples\data\Facial Features Tracker - High.cfg", considering Visage Technologies as a working directory. Default configuration files are provided in Samples/data folder. Other data files required by the tracker are located in the same folder as the configuration files, so their path is determined from the configuration file's path given here. For further details see <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af217f4271298546dde194ebac70251e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af217f4271298546dde194ebac70251e3">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageCSWrapper.VisageTracker.Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset tracking. </p>
<p>Resets the tracker. Tracker will reinitialise. </p>

</div>
</div>
<a id="a140fce671473ca51747f3414e4bb384c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140fce671473ca51747f3414e4bb384c">&#9670;&nbsp;</a></span>SetTrackerConfiguration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageCSWrapper.VisageTracker.SetTrackerConfiguration </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>trackerConfigFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>au_fitting_disabled</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>mesh_fitting_disabled</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set configuration file name. </p>
<p>The tracker configuration file name is set and this configuration file will be used for next tracking session (i.e. track() is called). Default configuration files (.cfg) are provided in Samples/data folder. Please refer to the <a href="../VisageTracker Configuration Manual.pdf">VisageTracker Configuration Manual</a> for further details on using the configuration files and all configurable options. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trackerConfigFile</td><td>The name of the tracker configuration file.</td></tr>
    <tr><td class="paramname">au_fitting_disabled</td><td>Disables the use of the 3D model used to estimate action units (au_fitting_model configuration parameter). If set to true, estimation of Action Units shall not be performed, and Action Units released data in the returned <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> structure will not be available (<a class="el" href="structVisageCSWrapper_1_1FaceData.html#a7ef8b68e3c2892cc64c126edb4b45157" title="List of current values for facial Action Units, one value for each Action Unit. ">FaceData::ActionUnits</a> etc.). Disabling will result in a small performance gain.</td></tr>
    <tr><td class="paramname">mesh_fitting_disabled</td><td>Disables the use of the fine 3D mesh (mesh_fitting_model configuration parameter). If set to true, the 3D mesh shall not be fitted and the related information shall not be available in the returned <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> structure (<a class="el" href="structVisageCSWrapper_1_1FaceData.html#a55c2a7024136bbe8482e13a4d4669931" title="List of vertex coordinates of the 3D face model. ">FaceData::FaceModelVertices</a> etc.). Disabling will result in small performance gain.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ac0ba343466c6012c66585717c38ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac0ba343466c6012c66585717c38ef5">&#9670;&nbsp;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageCSWrapper.VisageTracker.Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the tracking. </p>

</div>
</div>
<a id="a459cd7e4a70665c99f97b6958e1351d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a459cd7e4a70665c99f97b6958e1351d9">&#9670;&nbsp;</a></span>Track()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int [] VisageCSWrapper.VisageTracker.Track </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frameWidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frameHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Byte []&#160;</td>
          <td class="paramname"><em>imageData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a> []&#160;</td>
          <td class="paramname"><em>faceData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em> = <code>VISAGE_FORMAT.RGB</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>origin</em> = <code>VISAGE_ORIGIN.TL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>widthStep</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeStamp</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxFaces</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs face tracking (one or more faces) in the given image and returns tracking results and status. </p>
<p>This function should be called repeatedly on a series of images in order to perform continuous tracking.</p>
<p>If the tracker needs to be initialized, this will be done automatically before tracking is performed on the given image. Initialization means loading the tracker configuration file, required data files and allocating various data buffers to the given image size. This operation may take several seconds. This happens in the following cases:</p><ul>
<li>In the first frame (first call to track() function).</li>
<li>When frameWidth or frameHeight are changed, i.e. when they are different from the ones used in the last call to <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a459cd7e4a70665c99f97b6958e1351d9" title="Performs face tracking (one or more faces) in the given image and returns tracking results and status...">Track()</a> function.</li>
<li>If <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a140fce671473ca51747f3414e4bb384c" title="Set configuration file name. ">SetTrackerConfiguration()</a> function was called after the last call to <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html#a459cd7e4a70665c99f97b6958e1351d9" title="Performs face tracking (one or more faces) in the given image and returns tracking results and status...">Track()</a> function.</li>
<li>When maxFaces is changed, i.e. when it its different from the one used in the last call to track() function.</li>
</ul>
<p>The tracker results are returned in an array of <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> objects, one <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object for each tracked face. Contents of each <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> element depend on the corresponding tracker status (tracker statuses are returned as return value from the function).</p>
<p>The tracking of multiple faces is performed in parallel ( using OpenMP) and performance (speed) may vary depending on the number of CPU cores, the number of faces in the current image and the value of maxFaces argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frameWidth</td><td>Width of the frame</td></tr>
    <tr><td class="paramname">frameHeight</td><td>Height of the frame</td></tr>
    <tr><td class="paramname">imageData</td><td>Pointer to image pixel data; size of the array must correspond to frameWidth and frameHeight</td></tr>
    <tr><td class="paramname">faceData</td><td><a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> instance that will receive the tracking results. No tracking results will be returned if NULL pointer is passed. On first call of this function, the memory for the required member variables of the passed <a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> object will be allocated and initialized automatically. </td></tr>
    <tr><td class="paramname">format</td><td>Format of input images passed in imageData. It can not change during tracking. Format can be one of the following:<ul>
<li>VISAGE_FORMAT.RGB: each pixel of the image is represented by three bytes representing red, green and blue channels, respectively.</li>
<li>VISAGE_FORMAT.BGR: each pixel of the image is represented by three bytes representing blue, green and red channels, respectively.</li>
<li>VISAGE_FORMAT.RGBA: each pixel of the image is represented by four bytes representing red, green, blue and alpha (ignored) channels, respectively.</li>
<li>VISAGE_FORMAT.BGRA: each pixel of the image is represented by four bytes representing blue, green, red and alpha (ignored) channels, respectively.</li>
<li>VISAGE_FORMAT.LUMINANCE: each pixel of the image is represented by one byte representing the luminance (gray level) of the image. </li>
</ul>
</td></tr>
    <tr><td class="paramname">origin</td><td>Origin of input images that will be passed in p_imageData. It can not change during tracking. Format can be one of the following:<ul>
<li>VISAGE_ORIGIN.TL: Origin is the top left pixel of the image. Pixels are ordered row-by-row starting from top left.</li>
<li>VISAGE_ORIGIN.BL: Origin is the bottom left pixel of the image. Pixels are ordered row-by-row starting from bottom left. </li>
</ul>
</td></tr>
    <tr><td class="paramname">widthStep</td><td>Width of the image data buffer, in bytes.</td></tr>
    <tr><td class="paramname">timeStamp</td><td>The timestamp of the the input frame. The passed value will be returned with the tracking data for that frame (FaceData.timeStamp). Alternatively, the value of -1 can be passed, in which case the tracker will return time, in milliseconds, measured from the moment when tracking started.</td></tr>
    <tr><td class="paramname">maxFaces</td><td>The maximum number of faces that will be tracked (tracker currently supports up to 20 faces).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Tracking status (TRACK_STAT.OFF, TRACK_STAT.OK, TRACK_STAT.RECOVERING and TRACK_STAT.INIT, see <a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a> for more details)</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="VisageTracker_8cs_source.html">VisageTracker.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
