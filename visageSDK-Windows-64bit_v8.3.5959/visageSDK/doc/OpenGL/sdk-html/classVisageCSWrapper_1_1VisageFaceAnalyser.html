<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>visageSDK: VisageCSWrapper.VisageFaceAnalyser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">visageSDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceVisageCSWrapper.html">VisageCSWrapper</a></li><li class="navelem"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html">VisageFaceAnalyser</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classVisageCSWrapper_1_1VisageFaceAnalyser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">VisageCSWrapper.VisageFaceAnalyser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal facial images (yaw between -20 and 20 degrees).  
 <a href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9b9cbdbce298da5f8bfccf0a5846c85e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a9b9cbdbce298da5f8bfccf0a5846c85e">VisageFaceAnalyser</a> ()</td></tr>
<tr class="memdesc:a9b9cbdbce298da5f8bfccf0a5846c85e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a9b9cbdbce298da5f8bfccf0a5846c85e">More...</a><br /></td></tr>
<tr class="separator:a9b9cbdbce298da5f8bfccf0a5846c85e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9be936df85d43161914637abb78ef8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#afa9be936df85d43161914637abb78ef8">VisageFaceAnalyser</a> (System::String^ dataPath)</td></tr>
<tr class="memdesc:afa9be936df85d43161914637abb78ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#afa9be936df85d43161914637abb78ef8">More...</a><br /></td></tr>
<tr class="separator:afa9be936df85d43161914637abb78ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e9c0d9bc85bfb38dccc7d095736534"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a01e9c0d9bc85bfb38dccc7d095736534">~VisageFaceAnalyser</a> ()</td></tr>
<tr class="memdesc:a01e9c0d9bc85bfb38dccc7d095736534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a01e9c0d9bc85bfb38dccc7d095736534">More...</a><br /></td></tr>
<tr class="separator:a01e9c0d9bc85bfb38dccc7d095736534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413b4c8747081b96706627a1f6ff895c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a413b4c8747081b96706627a1f6ff895c">Init</a> (String dataPath)</td></tr>
<tr class="memdesc:a413b4c8747081b96706627a1f6ff895c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a>.  <a href="#a413b4c8747081b96706627a1f6ff895c">More...</a><br /></td></tr>
<tr class="separator:a413b4c8747081b96706627a1f6ff895c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0101562e6504b3ebdf29bb2cfdd1995a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a0101562e6504b3ebdf29bb2cfdd1995a">EstimateGender</a> (<a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a> facedata)</td></tr>
<tr class="memdesc:a0101562e6504b3ebdf29bb2cfdd1995a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimates gender from a facial image.  <a href="#a0101562e6504b3ebdf29bb2cfdd1995a">More...</a><br /></td></tr>
<tr class="separator:a0101562e6504b3ebdf29bb2cfdd1995a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8fd550753cabe555c0a040b391534b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#aa8fd550753cabe555c0a040b391534b3">EstimateEmotion</a> (<a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a> facedata, float[] probEstimates)</td></tr>
<tr class="memdesc:aa8fd550753cabe555c0a040b391534b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimates emotion from a facial image.  <a href="#aa8fd550753cabe555c0a040b391534b3">More...</a><br /></td></tr>
<tr class="separator:aa8fd550753cabe555c0a040b391534b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a424f68910cf45f163fcec751edca4897"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a424f68910cf45f163fcec751edca4897">EstimateAge</a> (<a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a> facedata)</td></tr>
<tr class="memdesc:a424f68910cf45f163fcec751edca4897"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimates age from a facial image.  <a href="#a424f68910cf45f163fcec751edca4897">More...</a><br /></td></tr>
<tr class="separator:a424f68910cf45f163fcec751edca4897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc89b245c18bb55d5d6e72118bd9a8db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#afc89b245c18bb55d5d6e72118bd9a8db">GetNormalizedFaceImage</a> (<a class="el" href="structVisageCSWrapper_1_1VSImage.html">VSImage</a>^ frame, <a class="el" href="structVisageCSWrapper_1_1VSImage.html">VSImage</a>^ normFace, <a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>^ face_data, <a class="el" href="classVisageCSWrapper_1_1FDP.html">FDP</a>^% normFDP, VS_NORM norm_type, System::String^ dataPath)</td></tr>
<tr class="memdesc:afc89b245c18bb55d5d6e72118bd9a8db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get normalized face image.  <a href="#afc89b245c18bb55d5d6e72118bd9a8db">More...</a><br /></td></tr>
<tr class="separator:afc89b245c18bb55d5d6e72118bd9a8db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal facial images (yaw between -20 and 20 degrees). </p>
<p>Before using <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a>, it must be initialized using the function <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a413b4c8747081b96706627a1f6ff895c" title="Initialise VisageFaceAnalyser. ">Init()</a>. Alternatively, data path can be passed to the constructor. Data path represent a relative path from the working directory to the directory that contains <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> data files. See the code example in <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a0101562e6504b3ebdf29bb2cfdd1995a" title="Estimates gender from a facial image. ">EstimateGender()</a> function.</p>
<p>After the initialization the following types of analysis can be used:</p>
<table class="doxtable">
<tr>
<td width="250"><b>ANALYSIS TYPE</b></td><td width="200"><b>FUNCTION</b> </td></tr>
<tr>
<td>age estimation</td><td><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a424f68910cf45f163fcec751edca4897" title="Estimates age from a facial image. ">EstimateAge()</a> </td></tr>
<tr>
<td>gender estimation</td><td><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a0101562e6504b3ebdf29bb2cfdd1995a" title="Estimates gender from a facial image. ">EstimateGender()</a> </td></tr>
<tr>
<td>emotion estimation</td><td><a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#aa8fd550753cabe555c0a040b391534b3" title="Estimates emotion from a facial image. ">EstimateEmotion()</a> </td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="VisageFaceAnalyser_8cs_source.html#l00036">36</a> of file <a class="el" href="VisageFaceAnalyser_8cs_source.html">VisageFaceAnalyser.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9b9cbdbce298da5f8bfccf0a5846c85e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b9cbdbce298da5f8bfccf0a5846c85e">&#9670;&nbsp;</a></span>VisageFaceAnalyser() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VisageCSWrapper.VisageFaceAnalyser.VisageFaceAnalyser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<a id="afa9be936df85d43161914637abb78ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9be936df85d43161914637abb78ef8">&#9670;&nbsp;</a></span>VisageFaceAnalyser() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VisageCSWrapper.VisageFaceAnalyser.VisageFaceAnalyser </td>
          <td>(</td>
          <td class="paramtype">System::String^&#160;</td>
          <td class="paramname"><em>dataPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataPath</td><td>Relative path from the working directory to the directory that contains <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> data files.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01e9c0d9bc85bfb38dccc7d095736534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01e9c0d9bc85bfb38dccc7d095736534">&#9670;&nbsp;</a></span>~VisageFaceAnalyser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VisageCSWrapper.VisageFaceAnalyser.~VisageFaceAnalyser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a424f68910cf45f163fcec751edca4897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a424f68910cf45f163fcec751edca4897">&#9670;&nbsp;</a></span>EstimateAge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float VisageCSWrapper.VisageFaceAnalyser.EstimateAge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>&#160;</td>
          <td class="paramname"><em>facedata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimates age from a facial image. </p>
<p>The function returns estimated age. Prior to using this function, it is necessary to process the facial image or video frame using <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html" title="Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for mult...">VisageTracker</a> or <a class="el" href="classVisageCSWrapper_1_1VisageFeaturesDetector.html" title="Faces and facial features detector implementation. ">VisageFeaturesDetector</a> and pass the obtained data to this function. An example of use, estimate age on the first face detected in an image file: </p>
<div class="fragment"><div class="line">VsImage </div><div class="line">frame = cvLoadImage(fileName);</div><div class="line"><a class="code" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a9b9cbdbce298da5f8bfccf0a5846c85e">VisageFaceAnalyser</a> </div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> </div><div class="line"><span class="keywordtype">int</span> is_initialized = m_VFA-&gt;init(dataPath);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>((is_initialized &amp; VFA_AGE) == VFA_AGE)</div><div class="line">{</div><div class="line"><span class="keywordtype">int</span> maxFaces = 100;</div><div class="line">FaceData</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> n_faces = m_Detector-&gt;detectFacialFeatures(frame, data, maxFaces);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (n_faces &gt; 0)</div><div class="line">{</div><div class="line">        <span class="keywordtype">float</span> detectionSuccessful = m_VFA-&gt;estimateAge(&amp;data[i]);</div><div class="line">}</div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">facedata</td><td>Needs to contain <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data. <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data remains unchanged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns estimated age and -1 if it failed.</dd></dl>

</div>
</div>
<a id="aa8fd550753cabe555c0a040b391534b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8fd550753cabe555c0a040b391534b3">&#9670;&nbsp;</a></span>EstimateEmotion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VisageCSWrapper.VisageFaceAnalyser.EstimateEmotion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>&#160;</td>
          <td class="paramname"><em>facedata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float []&#160;</td>
          <td class="paramname"><em>probEstimates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimates emotion from a facial image. </p>
<p>The function returns estimated probabilities for basic emotions. Prior to using this function, it is necessary to process the facial image or video frame using <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html" title="Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for mult...">VisageTracker</a> or <a class="el" href="classVisageCSWrapper_1_1VisageFeaturesDetector.html" title="Faces and facial features detector implementation. ">VisageFeaturesDetector</a> and pass the obtained data to this function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">facedata</td><td>Needs to contain <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data. <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data remains unchanged.</td></tr>
    <tr><td class="paramname">probEstimates</td><td>Array of 7 doubles. If successful, the function will fill this array with estimated probabilities for emotions in this order: anger, disgust, fear, happiness, sadness, surprise and neutral. Each probability will have a value between 0 and 1. Sum of probabilities does not have to be 1.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if estimation was successful.</dd></dl>
<p>See also: Facedata, <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html" title="Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for mult...">VisageTracker</a>, VisageDetector </p>

</div>
</div>
<a id="a0101562e6504b3ebdf29bb2cfdd1995a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0101562e6504b3ebdf29bb2cfdd1995a">&#9670;&nbsp;</a></span>EstimateGender()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VisageCSWrapper.VisageFaceAnalyser.EstimateGender </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>&#160;</td>
          <td class="paramname"><em>facedata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimates gender from a facial image. </p>
<p>The function returns 1 if estimated gender is male and 0 if it is a female. Prior to using this function, it is necessary to process the facial image or video frame using <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html" title="Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for mult...">VisageTracker</a> or <a class="el" href="classVisageCSWrapper_1_1VisageFeaturesDetector.html" title="Faces and facial features detector implementation. ">VisageFeaturesDetector</a> and pass the obtained data to this function.</p>
<p>The function returns 1 if estimated gender is male and 0 if it is a female. Prior to using this function, it is necessary to process the facial image or video frame using <a class="el" href="classVisageCSWrapper_1_1VisageTracker.html" title="Visage Tracker is a face tracker capable of tracking the head pose, facial features and gaze for mult...">VisageTracker</a> or <a class="el" href="classVisageCSWrapper_1_1VisageFeaturesDetector.html" title="Faces and facial features detector implementation. ">VisageFeaturesDetector</a> and pass the obtained data to this function. An example of use, estimate gender on the first face detected in an image file:</p>
<div class="fragment"><div class="line"><span class="comment">// load an image and store it in VSImage object</span></div><div class="line"><a class="code" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a9b9cbdbce298da5f8bfccf0a5846c85e">VisageFaceAnalyser</a> vfa = <span class="keyword">new</span> <a class="code" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a9b9cbdbce298da5f8bfccf0a5846c85e">VisageFaceAnalyser</a>();</div><div class="line"><span class="keywordtype">int</span> isInitialised = vfa.init(<span class="stringliteral">&quot;./bdtsdata/LBF/vfadata&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> maxFaces = 100;</div><div class="line">FaceData[] dataArray = <span class="keyword">new</span> FaceData[maxFaces];</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (isInitialised)</div><div class="line">{</div><div class="line">   <span class="keywordtype">int</span> numFaces = vfd.detectFacialFeatures(frame, dataArray, maxFaces, 0.1f);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (numFaces &gt; 0)</div><div class="line">        <span class="keywordtype">int</span> gender = vfa.estimateGender(data);</div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">facedata</td><td>Needs to contain <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data. <a class="el" href="classVisageCSWrapper_1_1FDP.html" title="Feature points of a face. ">FDP</a> data remains unchanged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if estimated gender is female, 1 if it is a male and -1 if it failed.</dd></dl>

</div>
</div>
<a id="afc89b245c18bb55d5d6e72118bd9a8db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc89b245c18bb55d5d6e72118bd9a8db">&#9670;&nbsp;</a></span>GetNormalizedFaceImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VisageCSWrapper.VisageFaceAnalyser.GetNormalizedFaceImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1VSImage.html">VSImage</a>^&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1VSImage.html">VSImage</a>^&#160;</td>
          <td class="paramname"><em>normFace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structVisageCSWrapper_1_1FaceData.html">FaceData</a>^&#160;</td>
          <td class="paramname"><em>face_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVisageCSWrapper_1_1FDP.html">FDP</a>^%&#160;</td>
          <td class="paramname"><em>normFDP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">VS_NORM&#160;</td>
          <td class="paramname"><em>norm_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">System::String^&#160;</td>
          <td class="paramname"><em>dataPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get normalized face image. </p>
<p>This function returns normalized face image with corresponding feature points. Size of the normalized face in the image is such that inter-pupillary distance is approximately quarter of the image width.</p>
<p>Face will be normalized to a varying degree depending on normalization type. For example rotated face with open mouth will only have its pose straightened with normalization type VS_NORM.POSE while with addition of VS_NORM.AU normalized face will also have closed mouth.</p>
<p>Note that the face will always have its pose straightened.</p>
<p>Types of normalization are:</p><ul>
<li>VS_NORM.POSE - face translation and rotation are set to zero thereby normalizing the pose</li>
<li>VS_NORM.SU - parameters describing the face shape (shape units) are set to zero thereby normalizing the face shape</li>
<li>VS_NORM.AU - parameters describing facial movements (action units) are set to zero, for example open mouth will be closed</li>
</ul>
<p>Different types of normalization can be combined with "|" operator, for example VS_NORM.POSE | VS_NORM.SU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>Image containing the face to be normalized, must be grey-scale</td></tr>
    <tr><td class="paramname">normFace</td><td>Image containing the normalized face; it must be allocated before calling the function; face size will depend on this image size</td></tr>
    <tr><td class="paramname">face_data</td><td><a class="el" href="structVisageCSWrapper_1_1FaceData.html" title="Face data structure, used as container for all face tracking and detection results. ">FaceData</a> structure containing the information about the face that will be normalized</td></tr>
    <tr><td class="paramname">normFDP</td><td>Features points that correspond to the normalized face; coordinates are normalized to 0-1 range</td></tr>
    <tr><td class="paramname">norm_type</td><td>Normalization type, a binary combination of VS_NORM.POSE - normalizes pose, VS_NORM.SU - normalizes shape units and VS_NORM.AU - normalizes action units</td></tr>
    <tr><td class="paramname">dataPath</td><td>Path to the folder where Face Detector.cfg is located, default values is ""</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a413b4c8747081b96706627a1f6ff895c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413b4c8747081b96706627a1f6ff895c">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VisageCSWrapper.VisageFaceAnalyser.Init </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>dataPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a>. </p>
<p>This function must be called before using <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> by passing it a path to the folder containing the <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> data files. Within the Visage|SDK package, this folder is Samples/data/bdtsdata/LBF/vfadata. When implementing applications, developers may copy this folder as part of their application. The path is given relative to the current working directory at the time of calling the <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a413b4c8747081b96706627a1f6ff895c" title="Initialise VisageFaceAnalyser. ">Init()</a> function. The <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> data folder contains the following subfolders corresponding to the various types of analysis that can be performed:</p>
<ul>
<li>
ad: age estimation </li>
<li>
gd: gender estimation </li>
<li>
ed: emotion estimation </li>
</ul>
<p>Note that it is not necessary for all subfolders to be present, only the ones needed by the types of analysis that will be performed. For example, if only gender estimation will be performed, then only the gd folder is required.</p>
<p>The return value of the <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#a413b4c8747081b96706627a1f6ff895c" title="Initialise VisageFaceAnalyser. ">Init()</a> function indicates which types of analysis have been successfully initialised. Subsequent attempt to use a type of analysis that was not initialized shall fail; for example, if only gd folder was present at initialization, attempt to use <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html#aa8fd550753cabe555c0a040b391534b3" title="Estimates emotion from a facial image. ">EstimateEmotion()</a> shall fail.</p>
<p>The return value is a bitwise combination of flags indicating which types of analysis are successfully initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataPath</td><td>Relative path from the working directory to the directory that contains <a class="el" href="classVisageCSWrapper_1_1VisageFaceAnalyser.html" title="Visage Face Analyser contains face analysis algorithms for estimating gender and emotion from frontal...">VisageFaceAnalyser</a> data files.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return value of 0 indicates that no data files are found and no analysis will be possible. In such case, the placement of data files should be verified. A non-zero value indicates that one or more types of analysis are successfully initialized. The specific types of analysis that have been initialized are indicated by a bitwise combination of the following flags: VFA_AGE, VFA_GENDER, VFA_EMOTION. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="VisageFaceAnalyser_8cs_source.html">VisageFaceAnalyser.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
